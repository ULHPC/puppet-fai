#!/bin/bash
################################################################################
# <%= scope.lookupvar('fai::params::nfsroot_hookdir') %>/50-set-tcp-sack
#
#       _   _ _____ ____  ____   ___   ___ _____   _   _             _
#      | \ | |  ___/ ___||  _ \ / _ \ / _ \_   _| | | | | ___   ___ | | __
#      |  \| | |_  \___ \| |_) | | | | | | || |   | |_| |/ _ \ / _ \| |/ /
#      | |\  |  _|  ___) |  _ <| |_| | |_| || |   |  _  | (_) | (_) |   <
#      |_| \_|_|   |____/|_| \_\\___/ \___/ |_|   |_| |_|\___/ \___/|_|\_\
#
################################################################################
# Shell scripts to be sourced at the end of make-fai-nfsroot for additional
# configuration of the nfsroot - here the reconfiguration of the initrd to
# include a set of kernel modules (network card typically)
################################################################################
# /!\ DO NOT EDIT THIS FILE: it has been automatically generated by Puppet.
#      In particular, any further changes will be overwritten at the next
#      puppet invocation
################################################################################

echo "*** Enter set_tcp_sack hook ***"

echo net.ipv4.tcp_sack=0 > ${NFSROOT}/etc/sysctl.d/net.ipv4.tcp_sack.conf

if [[ "$?" != 0 ]] ; then
  rm -f $MODFILE
  exit 1
else
  echo "=> Integrity check passed"
fi

